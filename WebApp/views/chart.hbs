<header>
  <div class="collapse bg-dark" id="navbarHeader">
    <div class="container">
      <div class="row">
        <div class="col-sm-8 col-md-7 py-4">
          <h4 class="text-white">Về Trang Web</h4>
          <p class="text-muted">Website cung cấp thông tin xác thật nhất về bất động sản !!!</p>
        </div>
        <div class="col-sm-4 offset-md-1 py-4">
          <h4 class="text-white">Liên Hệ</h4>
          <ul class="list-unstyled">
            <!--
            <li><a href="#" class="text-white">Follow on Twitter</a></li>
            <li><a href="#" class="text-white">Like on Facebook</a></li>
            <li><a href="#" class="text-white">Email me</a></li>
          -->
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="navbar navbar-dark bg-dark shadow-sm">
    <div class="container d-flex justify-content-between">
      <a href="#" class="navbar-brand d-flex align-items-center">
        <!--
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true" class="mr-2" viewBox="0 0 24 24" focusable="false"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>-->
        <img src="assets/image/home_gray.svg" width="50" style="fill: white;" alt="logo">&nbsp;
        <strong>Crawl</strong>
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </div>
</header>

<main role="main">

  <!--jumbotron-->
  <section class="text-center">
    <!--
    <div class="container">
      
    </div>
  -->
    <div class="col-lg-12 col-sm-12">
    <div class="card hovercard">
        <div class="card-background">
            <img class="card-bkimg" alt="" src="assets/image/green.jpg">
            <!-- http://lorempixel.com/850/280/people/9/ -->
        </div>
        <div class="useravatar">
            <img alt="" src="assets/image/fbLogo.png">
        </div>
        <div class="card-info"> <span class="card-title">Mogi Facebook</span>

        </div>
    </div>
    <div class="btn-pref btn-group btn-group-justified btn-group-lg" role="group" aria-label="...">
        <div class="btn-group btn-size" role="group">
            <a id="stars" class="btn btn-default" href="/"><span class="glyphicon glyphicon-star" aria-hidden="true"></span>
                <div class="hidden-xs">Bản Đồ Phổ Biến</div>
            </a>
        </div>
        <div class="btn-group btn-size" role="group">
            <a id="favorites" class="btn btn-primary" href="/chart" ><span class="glyphicon glyphicon-heart" aria-hidden="true"></span>
                <div class="hidden-xs">Biểu Đồ Dự Đoán</div>
            </a>
        </div>
        <div class="btn-group btn-size" role="group">
          <!--
            <a type="button" id="following" class="btn btn-default" href="/datatable" data-toggle="tab"><span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                <div class="hidden-xs">Danh Sách Người Dùng</div>
            </a>
          -->
           <a id="following" class="btn btn-default" href="/datatable" ><span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                <div class="hidden-xs">Danh Sách Người Dùng</div>
            </a>
        </div>
    </div>

        <div class="well">
      <div class="tab-content" style="text-align: justify;">
        <div  class="tab-pane fade in" id="tab1">

        </div>
        <div class="tab-pane fade in active show" id="tab2">
<form id="form" action="#">
  <div class="select-box">  
    <select>
     <option data-display="Chọn Quận">---</option>
     <option value=”10″>Quận 10</option>
     <option value=”2″>Quận 2</option>
     <option value=”4″>Quận 4</option>
     <option value=”7″>Quận 7</option>
     <option value=”1″>Quận 1</option>
  </select>
  </div> 
</form> 
<br><br>
          <div id="plot"></div>


        </div>
        <div class="tab-pane fade in" id="tab3">

        </div>
      </div>
    </div>
</div>
  </section>
</main>

<footer class="text-muted">
  <div class="container">
    <p class="float-right">
      <a href="#">Quay Về Đầu Trang</a>
    </p>
    <!--
    <p>Album example is &copy; Bootstrap, but please download and customize it for yourself!</p>
    <p>New to Bootstrap? <a href="https://getbootstrap.com/">Visit the homepage</a> or read our <a href="/docs/4.3/getting-started/introduction/">getting started guide</a>.</p>
  -->
  </div>
</footer>
<script type="text/javascript" src="assets/js/jquery-3.4.1.min.js"></script>
<script type="text/javascript" src="assets/js/math.js"></script>
<script type="text/javascript" src="assets/js/plotly-latest.js"></script>
<script src="assets/js/jquery.dataTables.min.js" type="text/javascript"></script>
<script type="text/javascript" src="assets/js/custom.js"></script>
<script src="assets/js/bootstrap.bundle.min.js" integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o" crossorigin="anonymous"></script>
<script src="assets/js/jquery-nice-select-1.1.0/js/jquery.js"></script> 
<script src="assets/js/jquery-nice-select-1.1.0/js/jquery.nice-select.js"></script>
<link rel="stylesheet" href="assets/js/jquery-nice-select-1.1.0/css/nice-select.css">
<script type="text/javascript">
    $(document).ready(function() {
        $(".btn-pref .btn").click(function () {
            $(".btn-pref .btn").removeClass("btn-primary").removeClass("active").addClass("btn-default");
            //$(".tab-pane").addClass("active"); // instead of this do the below 
            $(this).removeClass("btn-default").addClass("btn-primary");
            //$(this).tab('show');
        });
        $('select').niceSelect();
    });

    function draw() {
      try {
        function rand( lowest, highest){
            var adjustedHigh = (highest - lowest) + 1;       
            return Math.floor(Math.random()*adjustedHigh) + parseFloat(lowest);
        }
        // compile the expression once
        const expression = '0.385225x + 65.1416'
        const expr = math.compile(expression)

        var xDate = [];
        var yRandomValues = [];
        var i = 1567544450;
        var j = 0;
        while(i <= 1757018980){
          var date = new Date(i*1000);
          var temp = date.getFullYear() + "-" + (date.getMonth() + 1) + "-" + date.getDate();
          xDate.push(temp);
          i = i + 86371;
        }
        var high_0 = 500000000, low_0 = 410000000;
        var high_1 = 390000000, low_1 = 300000000;
        for(var i = 0; i < 500; i++){
            yRandomValues.push(rand(high_0,low_0));
            yRandomValues.push(rand(high_1,low_1));
            high_0 += 700000;
            low_0 += 700000;
            high_1 += 700000;
            low_1 += 700000;
        }

        // evaluate the expression repeatedly for different values of x
        const xValues = math.range(1000000000, 2000000000, 1000000).toArray()
        const yValues = xValues.map(function (x) {
          return expr.evaluate({x: x})
        })

        const trace0 = {
          x: xDate,
          y: yRandomValues,
          name: "Giá",
          mode: 'markers'
        };

        // render the plot using plotly
        const trace1 = {
          x: xDate,
          y: yValues,
          name: "Linear Regression",
          type: 'scatter',
        }
        const data = [trace0,trace1]

        var layout = {
          title: 'Biểu Đồ Giá Bất Động Sản',
          xaxis: {
            autorange: true,
            range: ['2019-04-09', '2025-04-09'],
            rangeselector: {buttons: [
                {
                  count: 1,
                  label: '1 tháng',
                  step: 'month',
                  stepmode: 'backward'
                },
                {
                  count: 6,
                  label: '6 tháng',
                  step: 'month',
                  stepmode: 'backward'
                },
                {step: 'all'}
              ]},
            rangeslider: {range: ['2019-04-09', '2025-04-09']},
            type: 'date'
          },
          yaxis: {
            autorange: true,
            range: [86.8700008333, 138.870004167],
            type: 'linear'
          }
        };

        Plotly.newPlot('plot', data, layout)
      }
      catch (err) {
        console.error(err)
        alert(err)
      }
    }

    document.getElementById('form').onclick = function (event) {
      event.preventDefault()
      draw()
    }

    //draw()
</script>
