<script type="text/javascript">
  /*
  var dataSet = [
    [ "Tiger Nixon", "System Architect", "Edinburgh", "5421", "2011/04/25", "$320,800" ],
    [ "Garrett Winters", "Accountant", "Tokyo", "8422", "2011/07/25", "$170,750" ],
    [ "Ashton Cox", "Junior Technical Author", "San Francisco", "1562", "2009/01/12", "$86,000" ],
    [ "Cedric Kelly", "Senior Javascript Developer", "Edinburgh", "6224", "2012/03/29", "$433,060" ],
    [ "Airi Satou", "Accountant", "Tokyo", "5407", "2008/11/28", "$162,700" ],
    [ "Brielle Williamson", "Integration Specialist", "New York", "4804", "2012/12/02", "$372,000" ],
    [ "Herrod Chandler", "Sales Assistant", "San Francisco", "9608", "2012/08/06", "$137,500" ],
    [ "Rhona Davidson", "Integration Specialist", "Tokyo", "6200", "2010/10/14", "$327,900" ],
    [ "Colleen Hurst", "Javascript Developer", "San Francisco", "2360", "2009/09/15", "$205,500" ],
    [ "Sonya Frost", "Software Engineer", "Edinburgh", "1667", "2008/12/13", "$103,600" ],
    [ "Jena Gaines", "Office Manager", "London", "3814", "2008/12/19", "$90,560" ],
    [ "Quinn Flynn", "Support Lead", "Edinburgh", "9497", "2013/03/03", "$342,000" ],
    [ "Charde Marshall", "Regional Director", "San Francisco", "6741", "2008/10/16", "$470,600" ],
    [ "Haley Kennedy", "Senior Marketing Designer", "London", "3597", "2012/12/18", "$313,500" ],
    [ "Tatyana Fitzpatrick", "Regional Director", "London", "1965", "2010/03/17", "$385,750" ],
    [ "Michael Silva", "Marketing Designer", "London", "1581", "2012/11/27", "$198,500" ],
    [ "Paul Byrd", "Chief Financial Officer (CFO)", "New York", "3059", "2010/06/09", "$725,000" ],
    [ "Gloria Little", "Systems Administrator", "New York", "1721", "2009/04/10", "$237,500" ],
    [ "Bradley Greer", "Software Engineer", "London", "2558", "2012/10/13", "$132,000" ],
    [ "Dai Rios", "Personnel Lead", "Edinburgh", "2290", "2012/09/26", "$217,500" ],
    [ "Jenette Caldwell", "Development Lead", "New York", "1937", "2011/09/03", "$345,000" ],
    [ "Yuri Berry", "Chief Marketing Officer (CMO)", "New York", "6154", "2009/06/25", "$675,000" ],
    [ "Caesar Vance", "Pre-Sales Support", "New York", "8330", "2011/12/12", "$106,450" ],
    [ "Doris Wilder", "Sales Assistant", "Sidney", "3023", "2010/09/20", "$85,600" ],
    [ "Angelica Ramos", "Chief Executive Officer (CEO)", "London", "5797", "2009/10/09", "$1,200,000" ],
    [ "Gavin Joyce", "Developer", "Edinburgh", "8822", "2010/12/22", "$92,575" ],
    [ "Jennifer Chang", "Regional Director", "Singapore", "9239", "2010/11/14", "$357,650" ],
    [ "Brenden Wagner", "Software Engineer", "San Francisco", "1314", "2011/06/07", "$206,850" ],
    [ "Fiona Green", "Chief Operating Officer (COO)", "San Francisco", "2947", "2010/03/11", "$850,000" ],
    [ "Shou Itou", "Regional Marketing", "Tokyo", "8899", "2011/08/14", "$163,000" ],
    [ "Michelle House", "Integration Specialist", "Sidney", "2769", "2011/06/02", "$95,400" ],
    [ "Suki Burks", "Developer", "London", "6832", "2009/10/22", "$114,500" ],
    [ "Prescott Bartlett", "Technical Author", "London", "3606", "2011/05/07", "$145,000" ],
    [ "Gavin Cortez", "Team Leader", "San Francisco", "2860", "2008/10/26", "$235,500" ],
    [ "Martena Mccray", "Post-Sales support", "Edinburgh", "8240", "2011/03/09", "$324,050" ],
    [ "Unity Butler", "Marketing Designer", "San Francisco", "5384", "2009/12/09", "$85,675" ]
];
*/
var dataSet = [];
var otherSet = [];
var message = [];
var groupID = [];
var postID = [];
var comment_owner_id = [];
var comment_content = [];
var comment_tags = [];
var comment_replies = [];
var i = 0;

{{# each items }}{{/each}}

{{# each items }}
    {{# each this }}
    if("{{this.score}}" != ''){
        otherSet.push(["{{this.attr_addr_street}}","{{this.attr_addr_ward}}", "{{this.attr_addr_district}}", "{{this.attr_addr_city}}", "{{this.attr_position}}","{{this.attr_surrounding}}", "{{this.attr_area}}", "{{this.attr_orientation}}", "{{this.attr_price_max}}", "{{this.attr_price_min}}", "{{this.attr_interior_floor}}", "{{this.attr_interior_room}}"]);
        dataSet.push(["",i+1,"{{this.attr_addr_number}}", "{{this.attr_transaction_type}}", "{{this.attr_realestate_type}}", "{{this.attr_potential}}", "{{this.attr_price}}","{{this.attr_project}}", "{{this.attr_legal}}"]);
        i++;
    }
    {{/each}}
{{/each}}
console.log(otherSet);
</script>
<header>
  <div class="collapse bg-dark" id="navbarHeader">
    <div class="container">
      <div class="row">
        <div class="col-sm-8 col-md-7 py-4">
          <h4 class="text-white">Về Trang Web</h4>
          <p class="text-muted">Website cung cấp thông tin xác thật nhất về bất động sản !!!</p>
        </div>
        <div class="col-sm-4 offset-md-1 py-4">
          <h4 class="text-white">Liên Hệ</h4>
          <ul class="list-unstyled">
          	<!--
            <li><a href="#" class="text-white">Follow on Twitter</a></li>
            <li><a href="#" class="text-white">Like on Facebook</a></li>
            <li><a href="#" class="text-white">Email me</a></li>
        	-->
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div class="navbar navbar-dark bg-dark shadow-sm">
    <div class="container d-flex justify-content-between">
      <a href="#" class="navbar-brand d-flex align-items-center">
      	<!--
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true" class="mr-2" viewBox="0 0 24 24" focusable="false"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>-->
        <img src="assets/image/home_gray.svg" width="50" style="fill: white;" alt="logo">&nbsp;
        <strong>Crawl</strong>
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </div>
</header>

<main role="main">

	<!--jumbotron-->
  <section class="text-center">
  	<!--
    <div class="container">
      
    </div>
	-->
    <div class="col-lg-12 col-sm-12">
    <div class="card hovercard">
        <div class="card-background">
            <img class="card-bkimg" alt="" src="assets/image/green.jpg">
            <!-- http://lorempixel.com/850/280/people/9/ -->
        </div>
        <div class="useravatar">
            <img alt="" src="assets/image/fbLogo.png">
        </div>
        <div class="card-info"> <span class="card-title">Mogi Facebook</span>

        </div>
    </div>
    <div class="btn-pref btn-group btn-group-justified btn-group-lg" role="group" aria-label="...">
        <div class="btn-group btn-size" role="group">
            <a id="stars" class="btn btn-default" href="/"><span class="glyphicon glyphicon-star" aria-hidden="true"></span>
                <div class="hidden-xs">Bản Đồ Phổ Biến</div>
            </a>
        </div>
        <div class="btn-group btn-size" role="group">
            <a id="favorites" class="btn btn-default" href="/chart" ><span class="glyphicon glyphicon-heart" aria-hidden="true"></span>
                <div class="hidden-xs">Biểu Đồ Dự Đoán</div>
            </a>
        </div>
        <div class="btn-group btn-size" role="group">
            <button type="button" id="following" class="btn btn-primary" href="/datatable" data-toggle="tab"><span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                <div class="hidden-xs">Danh Sách Người Dùng</div>
            </button>
        </div>
    </div>

        <div class="well">
      <div class="tab-content" style="text-align: justify;">
        <div  class="tab-pane fade in" id="tab1">

        </div>
        <div class="tab-pane fade in" id="tab2">
        </div>
        <div class="tab-pane fade in active show" id="tab3">
          <!--
 			<dir style="overflow: auto;">
        <table id="example" class="display" width="100%"></table>
      </dir>
    -->
        <table id="example" class="display" style="width:100%">
            <thead>
                <tr>
                    <th></th>
                    <th>STT</th>
                    <th>Số Điện Thoại Liên Lạc</th>
                    <th>Loại Giao Dịch</th>
                    <th>Loại Bất Động Sản</th>
                    <th>Tiềm Năng</th>
                    <th>Giá</th>
                    <th>Dự Án</th>
                    <th>Tính Pháp Lý</th>
                </tr>
            </thead>
            <tfoot>
                <tr>
                    <th></th>
                    <th>STT</th>
                    <th>Số Điện Thoại Liên Lạc</th>
                    <th>Loại Giao Dịch</th>
                    <th>Loại Bất Động Sản</th>
                    <th>Tiềm Năng</th>
                    <th>Giá</th>
                    <th>Dự Án</th>
                    <th>Tính Pháp Lý</th>
                </tr>
            </tfoot>
        </table>
        </div>
      </div>
    </div>
</div>
  </section>
</main>

<footer class="text-muted">
  <div class="container">
    <p class="float-right">
      <a href="#">Quay Về Đầu Trang</a>
    </p>
    <!--
    <p>Album example is &copy; Bootstrap, but please download and customize it for yourself!</p>
    <p>New to Bootstrap? <a href="https://getbootstrap.com/">Visit the homepage</a> or read our <a href="/docs/4.3/getting-started/introduction/">getting started guide</a>.</p>
	-->
  </div>
</footer>
<script type="text/javascript" src="assets/js/jquery-3.4.1.min.js"></script>
<script type="text/javascript" src="assets/js/onlyChart.js"></script>
<script src="assets/js/jquery.dataTables.min.js" type="text/javascript"></script>
<script type="text/javascript" src="assets/js/custom.js"></script>
<script src="assets/js/bootstrap.bundle.min.js" integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o" crossorigin="anonymous"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $(".btn-pref .btn").click(function () {
            $(".btn-pref .btn").removeClass("btn-primary").removeClass("active").addClass("btn-default");
            //$(".tab-pane").addClass("active"); // instead of this do the below 
            $(this).removeClass("btn-default").addClass("btn-primary");
            //$(this).tab('show');
        });
    });

function format ( d ) {
    // `d` is the original data object for the row

    var upper_part = '<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">'+
        '<tr>'+
            '<td>Đường:</td>'+
            '<td>'+otherSet[d][0]+'</td>'+
        '</tr>'+
        '<tr>'+
            '<td>Phường:</td>'+
            '<td>'+otherSet[d][1]+'</td>'+
        '</tr>'+
        '<tr>'+
            '<td>Quận:</td>'+
            '<td>'+otherSet[d][2]+'</td>'+
        '</tr>'+
        '<tr>'+
            '<td>Thành Phố:</td>'+
            '<td>'+otherSet[d][3]+'</td>'+
        '</tr>'+
        '<tr>'+
            '<td>Vị Trí:</td>'+
            '<td>'+otherSet[d][4]+'</td>'+
        '</tr>'+
        '<tr>'+
            '<td>Khu Vực:</td>'+
            '<td>'+otherSet[d][5]+'</td>'+
        '</tr>'+
        '<tr>'+
            '<td>Khu Vực Xung Quanh:</td>'+
            '<td>'+otherSet[d][6]+'</td>'+
        '</tr>'+
        '<tr>'+
            '<td>Hướng Nhà:</td>'+
            '<td>'+otherSet[d][7]+'</td>'+
        '</tr>'+
        '<tr>'+
            '<td>Giá Tối Đa:</td>'+
            '<td>'+otherSet[d][8]+'</td>'+
        '</tr>'+
        '<tr>'+
            '<td>Giá Tối Thiểu:</td>'+
            '<td>'+otherSet[d][9]+'</td>'+
        '</tr>'+
        '<tr>'+
            '<td>Nội Thất:</td>'+
            '<td>'+otherSet[d][10]+'</td>'+
        '</tr>'+
        '<tr>'+
            '<td>Phòng Ốc:</td>'+
            '<td>'+otherSet[d][11]+'</td>'+
        '</tr>';
/*
    var post = postID[d].split(',');

    var lower_part = '<tr>' +'<td>ID Của Bài Đăng:</td><td>';
    for (var j = 0; j < post.length; j++)
        lower_part = lower_part + '<a href="https://www.facebook.com/' + post[j] + '">' + 'https://www.facebook.com/' + post[j] + '</a><br>';

    lower_part = lower_part + '</td></tr>';

    var group = groupID[d].split(',');

    var lower_part = lower_part + '<tr>' +'<td>ID Của Nhóm:</td><td>';
    for (var j = 0; j < group.length; j++)
        lower_part = lower_part + '<a href="https://www.facebook.com/' + group[j] + '">' + 'https://www.facebook.com/' + group[j] + '</a><br>';

    lower_part = lower_part + '</td></tr>';
*/
    return upper_part /* + lower_part */ + '</table>';
}
 
$(document).ready(function() {
    var table = $('#example').DataTable( {
        "data": dataSet,
        "columns": [
            {
                "className":      'details-control',
                "orderable":      false,
                "data":           null,
                "defaultContent": ''
            },
            { title: "STT" },
            { title: "Số Điện Thoại Liên Lạc" },
            { title: "Loại Giao Dịch" },
            { title: "Loại Bất Động Sản" },
            { title: "Tiềm Năng" },
            { title: "Giá" },
            { title: "Dự Án" },
            { title: "Tính Pháp Lý" }
        ],
        "order": [[1, 'asc']]
    } );
     
    var tables = document.getElementsByTagName("table")[0];
    var tbody = tables.getElementsByTagName("tbody")[0]; 
    // Add event listener for opening and closing details
    $('#example tbody').on('click', 'td.details-control', function (e) {
        var tr = $(this).closest('tr');
        var row = table.row( tr );
 
        if ( row.child.isShown() ) {
            // This row is already open - close it
            row.child.hide();
            tr.removeClass('shown');
        }
        else {
                e = e || window.event;
                var data = [];
                var target = e.srcElement || e.target;
                while (target && target.nodeName !== "TR") {
                    target = target.parentNode;
                }
                if (target) {
                    var cell = target.getElementsByClassName("sorting_1")[0];
                    data.push(cell.textContent);
                }
                //alert(data);
            // Open this row
            row.child( format(data-1)).show();
            tr.addClass('shown');
        }
    } );
} );
</script>
